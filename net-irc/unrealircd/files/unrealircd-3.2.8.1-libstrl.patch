Author: Nathan Phillip Brink <ohnobinki@ohnopublishing.net>
Date: 2010/11/27

Use libstrl for the strlcat(), strlcpy(), and strnlen() functions.

--- a/Makefile.in	Sat Nov 27 09:44:06 2010 -0500
+++ b/Makefile.in	Sat Nov 27 10:40:23 2010 -0500
@@ -34,7 +34,7 @@
 #
 
 #XCFLAGS=-O -g -export-dynamic
-IRCDLIBS=@IRCDLIBS@ @TRE_LIBS@ @CARES_LIBS@
+IRCDLIBS=@IRCDLIBS@ @TRE_LIBS@ @CARES_LIBS@ @LIBSTRL_LIBS@
 CRYPTOLIB=@CRYPTOLIB@
 OPENSSLINCLUDES=
 
diff -r 4e2567f3035d -r d3c0a7a3b171 autoconf/configure.in
--- a/autoconf/configure.in	Sat Nov 27 09:44:06 2010 -0500
+++ b/autoconf/configure.in	Sat Nov 27 10:40:23 2010 -0500
@@ -261,9 +261,14 @@
 AC_FUNC_ALLOCA
 AC_CHECK_FUNCS(snprintf,AC_DEFINE(HAVE_SNPRINTF))
 AC_CHECK_FUNCS(vsnprintf,AC_DEFINE(HAVE_VSNPRINTF))
-AC_CHECK_FUNCS(strlcpy, AC_DEFINE(HAVE_STRLCPY))
-AC_CHECK_FUNCS(strlcat, AC_DEFINE(HAVE_STRLCAT))
 AC_CHECK_FUNCS(strlncat, AC_DEFINE(HAVE_STRLNCAT))
+
+PKG_CHECK_MODULES([LIBSTRL], [libstrl >= 0.2])
+LIBS="$LIBS $LIBSTRL_LIBS"
+CFLAGS="$CFLAGS $LIBSTRL_CFLAGS"
+AC_DEFINE(HAVE_STRLCPY)
+AC_DEFINE(HAVE_STRLCAT)
+
 AC_CHECK_FUNCS(inet_pton, AC_DEFINE(HAVE_INET_PTON))
 AC_CHECK_FUNCS(inet_ntop, AC_DEFINE(HAVE_INET_NTOP))
 dnl Check if it supports C99 style variable length arrays
